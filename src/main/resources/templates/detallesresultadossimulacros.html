<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Academia cerebritos</title>
    <title>Title</title>
</head>
<body th:replace="layout.html">
<!-- Contenido específico de la página -->
<div th:fragment="content" class="pt-10">
    <span class="text-3xl font-extrabold pb-3 text-gray-700">Detalles de la evaluación simulacro</span>
    <canvas id="chart" class="min-w-[10rem] scale-75"></canvas>
    <!-- En la vista detallesresultadossimulacros -->
    <table>
        <tr>
            <th>Curso</th>
            <th>Estado 0</th>
            <th>Estado 1</th>
        </tr>
        <!-- Iterar sobre la lista resultadosPorCurso -->
        <tr th:each="resultado : ${resultadosPorCurso}">
            <td th:text="${resultado.curso.nombre}"></td>
            <td th:text="${resultado.estado0}"></td>
            <td th:text="${resultado.estado1}"></td>
        </tr>
    </table>

    <script th:inline="javascript">
        /* Obtener los datos del modelo y convertirlos en variables de JavaScript */
        var cursos = /*[[${resultadosPorCurso.![curso.nombre}]]*/ [];
        var estados1 = /*[[${resultadosPorCurso.![estado1}]]*/ [];

        /* Crear el gráfico con los datos dinámicos */
        const ctx = document.getElementById('chart').getContext('2d');
        const chart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: cursos, // Etiquetas obtenidas dinámicamente desde el modelo
            datasets: [{
              label: 'Preguntas en estado 1',
              data: estados1, // Datos obtenidos dinámicamente desde el modelo
            }],
          },
          options: {
            indexAxis: 'y', // <-- aquí
            responsive: true
          }
        });
    </script>
</div>
</body>
</html>